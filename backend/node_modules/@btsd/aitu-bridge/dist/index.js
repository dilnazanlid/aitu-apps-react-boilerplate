function e(e,n){var t,o,r=(t={current:0,next:function(){return++this.current}},o={},{add:function(e,n){var r=null!=n?n:t.next();return o[r]=e,r},resolve:function(e,n,t,r){var i=o[e];i&&(t(r)?i.resolve(n):i.reject(r),o[e]=null)}});return n(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&r.resolve(t,n.data,function(e){return!e},n.error)}}),function(){var n=arguments;return new Promise(function(t,o){var i=r.add({resolve:t,reject:o});e.apply(void 0,[i].concat([].slice.call(n)))})}}var n;!function(e){e.getMe="GetMe",e.getPhone="GetPhone",e.getContacts="GetContacts",e.enableNotifications="AllowNotifications",e.disableNotifications="DisableNotifications"}(n||(n={}));var t="invoke",o="storage",r="undefined"!=typeof window&&window.AndroidBridge,i="undefined"!=typeof window&&window.webkit&&window.webkit.messageHandlers,a="undefined"!=typeof window&&window.top!==window&&(window.WebBridge=window.WebBridge||{});if(a){var s=window.AITU_ORIGIN||"https://aitu.io";[t,o].forEach(function(e){a[e]||(a[e]=function(){return window.top.postMessage(JSON.stringify({method:e,payload:[].slice.call(arguments)}),s)})}),window.addEventListener("message",function(e){if(e.origin===s&&e.data)try{var n=JSON.parse(e.data);window.dispatchEvent(new CustomEvent("aituEvents",{detail:n}))}catch(e){}})}var d=function(){var s=[];"undefined"!=typeof window&&window.addEventListener("aituEvents",function(e){[].concat(s).map(function(n){return n.call(null,e)})});var d,c,u,f=function(e){s.push(e)},l=(d={current:0,next:function(){return++this.current}},c={},u={add:function(e,n){var t=null!=n?n:d.next();return c[t]=e,t},resolve:function(e,n,t,o){var r=c[e];r&&(t(o)?r.resolve(n):r.reject(o),c[e]=null)}},f(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&u.resolve(t,n.data,function(e){return!e},n.error)}}),function(e,n){return void 0===n&&(n={}),new Promise(function(o,s){!function(e,n,o){void 0===o&&(o={});var s=i&&i[t],d=a&&a[t];r&&r[t]?r[t](e,n,JSON.stringify(o)):s?i[t].postMessage({reqId:e,method:n,data:o}):d?a[t](e,n,o):"undefined"!=typeof window&&console.log("--invoke-isUnknown")}(u.add({resolve:o,reject:s},n.reqId),e,n)})}),g=function(e,n){var t,o,r=(t={current:0,next:function(){return++this.current}},o={},{add:function(e,n){var r="s"+(null!=n?n:t.next());return o[r]=e,r},resolve:function(e,n,t,r){var i=o[e];i&&(t(r)?i.resolve(n):i.reject(r),o[e]=null)}});return n(function(e){if(e.detail&&"reqId"in e.detail){var n=e.detail,t=n.reqId;t&&r.resolve(t,n.data,function(e){return!e},n.error)}}),{setItem:function(n,t){return new Promise(function(o,i){var a=r.add({resolve:o,reject:i});e(a,"setItem",{keyName:n,keyValue:t})})},getItem:function(n){return new Promise(function(t,o){var i=r.add({resolve:t,reject:o});e(i,"getItem",{keyName:n})})},clear:function(){return new Promise(function(n,t){var o=r.add({resolve:n,reject:t});e(o,"clear",{})})}}}(function(e,n,t){void 0===t&&(t={});var s=i&&i[o],d=a&&a[o];r&&r[o]?r[o](e,n,JSON.stringify(t)):s?i[o].postMessage({reqId:e,method:n,data:t}):d?a[o](e,n,t):"undefined"!=typeof window&&console.log("--storage-isUnknown")},f),v=e(function(e){var n=i&&i.getGeo;r&&r.getGeo?r.getGeo(e):n?i.getGeo.postMessage({reqId:e}):"undefined"!=typeof window&&console.log("--getGeo-isWeb")},f),w=e(function(e){var n=i&&i.getQr;r&&r.getQr?r.getQr(e):n?i.getQr.postMessage({reqId:e}):"undefined"!=typeof window&&console.log("--getQr-isWeb")},f),p=e(function(e){var n=i&&i.selectContact;r&&r.selectContact?r.selectContact(e):n?i.selectContact.postMessage({reqId:e}):"undefined"!=typeof window&&console.log("--selectContact-isWeb")},f),y=e(function(e){var n=i&&i.openSettings;r&&r.openSettings?r.openSettings(e):n?i.openSettings.postMessage({reqId:e}):"undefined"!=typeof window&&console.log("--openSettings-isWeb")},f),h=e(function(e,n){var t=i&&i.share;r&&r.share?r.share(e,n):t?i.share.postMessage({reqId:e,text:n}):"undefined"!=typeof window&&console.log("--share-isWeb")},f),b=e(function(e,n){var t=i&&i.copyToClipboard;r&&r.copyToClipboard?r.copyToClipboard(e,n):t?i.copyToClipboard.postMessage({reqId:e,text:n}):"undefined"!=typeof window&&console.log("--copyToClipboard-isWeb")},f),I=e(function(e,n,t){var o=i&&i.shareImage;r&&r.shareImage?r.shareImage(e,n,t):o?i.shareImage.postMessage({reqId:e,text:n,image:t}):"undefined"!=typeof window&&console.log("--shareImage-isWeb")},f),m=e(function(e,n){if(!Array.isArray(n)||n.some(function(e){return e<1||e!==Math.floor(e)})||n.reduce(function(e,n){return e+n})>1e4)console.error("Pattern should be an array of positive integers no longer than 10000ms total");else{var t=i&&i.vibrate;r&&r.vibrate?r.vibrate(e,JSON.stringify(n)):t?i.vibrate.postMessage({reqId:e,pattern:n}):"undefined"!=typeof window&&console.log("--vibrate-isWeb")}},f);return{copyToClipboard:b,invoke:l,storage:g,getMe:function(){return l(n.getMe)},getPhone:function(){return l(n.getPhone)},getContacts:function(){return l(n.getContacts)},getGeo:v,getQr:w,selectContact:p,enableNotifications:function(){return l(n.enableNotifications)},disableNotifications:function(){return l(n.disableNotifications)},openSettings:y,share:h,shareImage:I,setShakeHandler:function(e){r&&r.setShakeHandler||i&&i.setShakeHandler?window.onAituBridgeShake=e:"undefined"!=typeof window&&console.log("--setShakeHandler-isWeb")},vibrate:m,isSupported:function(){return r||i||a},supports:function(e){return r&&"function"==typeof r[e]||i&&i[e]&&"function"==typeof i[e].postMessage||a&&"function"==typeof a[e]},sub:f}}();module.exports=d;
//# sourceMappingURL=index.js.map
